{
  "hash": "9a0cf127e3f02e7677b9fa3dcb67d759",
  "result": {
    "markdown": "---\ntitle: \"Regression Discontinuity\"\n---\n\n\n\n\n## Sensitivity of result\n\n1. RDD with half the bandwidth\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-2_a72404ac7b59e100ef63eb71ff2d7869'}\n\n```{.r .cell-code}\n# Define cut-off\nc0 <- 60\n\n# [3] Dependent variable ----\n# [3.1] Average Treatment Effect ----\n# Plot regression lines for full and specified bandwidth.\n# Specify bandwidth\nbw <- c0 + c(-5, 5)\n# Half the bandwidth\nbw_half <- bw/2\n\n# Subsets below and above threshold in specified bandwidth\ndf_bw_half_below <- coupon %>% filter(days_since_last >= bw_half[1] & days_since_last < c0)\ndf_bw_half_above <- coupon %>% filter(days_since_last >= c0 & days_since_last <= bw_half[2])\n\ndf_bw_half <- bind_rows(df_bw_half_above, df_bw_half_below)\n\n# [4] Estimation ----\n# [4.1] Parametric ----\n# Compute coefficients for specified bandwidth.\nlm_bw_half <- lm(purchase_after ~ days_since_last_centered + coupon, df_bw_half)\nsummary(lm_bw_half)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_after ~ days_since_last_centered + coupon, \n#>     data = df_bw_half)\n#> \n#> Residuals:\n#>      Min       1Q   Median       3Q      Max \n#> -10.3229  -2.0615   0.0481   2.1503   8.6534 \n#> \n#> Coefficients: (1 not defined because of singularities)\n#>                           Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)              10.478972   0.172501  60.747   <2e-16 ***\n#> days_since_last_centered -0.011304   0.008448  -1.338    0.181    \n#> couponTRUE                      NA         NA      NA       NA    \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 3.044 on 1560 degrees of freedom\n#> Multiple R-squared:  0.001147,\tAdjusted R-squared:  0.0005063 \n#> F-statistic: 1.791 on 1 and 1560 DF,  p-value: 0.181\n```\n:::\n:::\n\n\n2. RDD with double the bandwidth\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-3_d3c0151a6bde3d7fdf68bd07a270b21e'}\n\n```{.r .cell-code}\n# Double the bandwidth\nbw_double <- bw*2\n\n# Subsets below and above threshold in specified bandwidth\ndf_bw_double_below <- coupon %>% filter(days_since_last >= bw_double[1] & days_since_last < c0)\ndf_bw_double_above <- coupon %>% filter(days_since_last >= c0 & days_since_last <= bw_double[2])\n\ndf_bw_double <- bind_rows(df_bw_double_above, df_bw_double_below)\n\n# [4] Estimation ----\n# [4.1] Parametric ----\n# Compute coefficients for specified bandwidth.\nlm_bw_double <- lm(purchase_after ~ days_since_last_centered + coupon, df_bw_double)\nsummary(lm_bw_double)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_after ~ days_since_last_centered + coupon, \n#>     data = df_bw_double)\n#> \n#> Residuals:\n#>      Min       1Q   Median       3Q      Max \n#> -12.5145  -1.9256   0.0637   1.9615  10.4714 \n#> \n#> Coefficients: (1 not defined because of singularities)\n#>                           Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)              2.038e+01  1.530e-01 133.197   <2e-16 ***\n#> days_since_last_centered 1.229e-04  5.110e-03   0.024    0.981    \n#> couponTRUE                      NA         NA      NA       NA    \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 2.963 on 1045 degrees of freedom\n#> Multiple R-squared:  5.536e-07,\tAdjusted R-squared:  -0.0009564 \n#> F-statistic: 0.0005785 on 1 and 1045 DF,  p-value: 0.9808\n```\n:::\n:::\n\n\nWe observe that changing the bandwidth affects the result of RDD significantly. For both bandwidth values, we obtain `NA` for the coefficient of `couponTRUE`.\n\n## Shipping campaign\n\nThe variable `purchase_amount` may not be suitable to be used as a running variable with a cut-off at 30â‚¬. The running variable and the cut-off value should be chosen such that only observations that were close to a cut-off value determining their treatment status. However, it could be the case that other observable characteristics, for e.g., customer demographics, purchase history, customer economic status, are different for customers above and below the cut-off. Thus, treated and untreated units might be incomparable, since they are different in characteristics other than the treatment status and RDD is unable to eliminate selection bias for that sub-population.\n\nWe use a plot to confirm our assumption.\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-4_0b2206f23dfc64e67daa512ac41689fa'}\n\n```{.r .cell-code}\nrddd <- rddensity(shipping$purchase_amount, c = 30)\nrdd_plot <- rdplotdensity(rddd, shipping$purchase_amount, plotN = 100)\n```\n\n::: {.cell-output-display}\n![](10_rdd_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\nSince the confidence intervals do not overlap in the plot, we have to suspect some kind of manipulation around the cut-off and could not use RDD to obtain valid results.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}